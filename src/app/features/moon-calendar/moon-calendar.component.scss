@use 'styles/variables' as *;
@use 'styles/mixins' as *;



.moon-calendar {
    min-height: 100vh;
    padding: $spacing-2xl $spacing-lg;
    position: relative;
    background: linear-gradient(180deg,
            #0a0a12 0%,
            #0d0d1a 30%,
            #0f0f1f 60%,
            #0a0a14 100%);
    overflow-x: hidden;

    // ვარსკვლავების ეფექტი
    &::before {
        content: '';
        position: absolute;
        inset: 0;
        background-image:
            radial-gradient(1px 1px at 20px 30px, white, transparent),
            radial-gradient(1px 1px at 40px 70px, rgba(255, 255, 255, 0.8), transparent),
            radial-gradient(1.5px 1.5px at 90px 40px, white, transparent),
            radial-gradient(1px 1px at 130px 80px, rgba(255, 255, 255, 0.6), transparent),
            radial-gradient(1.2px 1.2px at 160px 120px, white, transparent),
            radial-gradient(1px 1px at 200px 50px, rgba(255, 255, 255, 0.7), transparent),
            radial-gradient(1.5px 1.5px at 250px 160px, white, transparent),
            radial-gradient(1px 1px at 300px 90px, rgba(255, 255, 255, 0.5), transparent),
            radial-gradient(1px 1px at 350px 140px, white, transparent),
            radial-gradient(1.2px 1.2px at 400px 60px, rgba(255, 255, 255, 0.8), transparent);
        background-size: 450px 200px;
        animation: twinkle-bg 8s ease-in-out infinite;
        opacity: 0.5;
        z-index: 0;
        pointer-events: none;
    }

    @include mobile {
        padding: $spacing-xl $spacing-md;
    }
}



// ===================================
// Calendar Container
// ===================================

@keyframes twinkle-bg {

    0%,
    100% {
        opacity: 0.5;
    }

    50% {
        opacity: 0.8;
    }
}

.calendar-container {
    margin-bottom: $spacing-3xl;
    // background: rgba(30, 27, 75, 0.3);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(white, 0.05);
    border-radius: $radius-xl;
    padding: $spacing-xl;
    box-shadow: $shadow-xl;
    overflow: hidden;
    @include smooth-transition;
}

.table-wrapper {
    overflow-x: auto;
    overflow-y: visible;

    &::-webkit-scrollbar {
        height: 8px;
    }

    &::-webkit-scrollbar-track {
        background: rgba($bg-card, 0.3);
        border-radius: $radius-full;
    }

    &::-webkit-scrollbar-thumb {
        background: rgba($primary-violet, 0.5);
        border-radius: $radius-full;

        &:hover {
            background: rgba($primary-violet, 0.7);
        }
    }
}

// ===================================
// Table
// ===================================
.moon-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    min-width: 900px;

    thead {
        position: sticky;
        top: 0;
        z-index: 10;

        tr {
            background: rgba($bg-card, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        th {
            padding: $spacing-lg $spacing-md;
            text-align: left;
            font-size: $font-sm;
            font-weight: $font-bold;
            color: $text-secondary;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 2px solid rgba($primary-violet, 0.3);
            white-space: nowrap;

            &:first-child {
                border-top-left-radius: $radius-lg;
            }

            &:last-child {
                border-top-right-radius: $radius-lg;
            }
        }
    }

    tbody {
        tr {
            @include smooth-transition;
            border-bottom: 1px solid rgba($primary-violet, 0.1);

            &:hover {
                background: rgba($primary-violet, 0.05);
                transform: scale(1.01);
            }

            &.current-day {
                background: rgba($accent-gold, 0.1);
                border: 2px solid rgba($accent-gold, 0.4);
                box-shadow: 0 0 20px rgba($accent-gold, 0.2);

                .date-number {
                    background: $gradient-cosmic;
                    color: $text-primary;
                    font-weight: $font-bold;
                }
            }

            &.major-phase {
                background: rgba($primary-violet, 0.08);

                .phase-icon {
                    font-size: 32px;
                    animation: pulse-glow 2s ease-in-out infinite;
                }
            }
        }

        td {
            padding: $spacing-md;
            font-size: $font-sm;
            color: $text-primary;
            vertical-align: middle;
        }
    }
}

// ===================================
// Table Cells
// ===================================
.date-cell {
    width: 80px;
}

.date-content {
    @include flex-center;
    flex-direction: column;
    gap: $spacing-xs;
}

.date-number {
    font-size: $font-xl;
    font-weight: $font-bold;
    color: $text-secondary;
    width: 40px;
    height: 40px;
    @include flex-center;
    border-radius: $radius-full;
    background: rgba($primary-violet, 0.1);
}

.month-abbr {
    font-size: $font-xs;
    color: rgba($text-secondary, 0.6);
    text-transform: uppercase;
}

.day-cell {
    width: 100px;
    font-weight: $font-medium;
    color: $text-secondary;
}

.phase-cell {
    width: 200px;
}

.phase-content {
    display: flex;
    gap: $spacing-md;
    align-items: center;
}

.phase-icon {
    font-size: 28px;
    filter: drop-shadow(0 0 8px rgba($text-secondary, 0.5));
}

.phase-info {
    display: flex;
    flex-direction: column;
    gap: $spacing-xs;
}

.phase-type {
    font-weight: $font-medium;
    color: $text-primary;
}

.phase-time {
    font-size: $font-xs;
    color: $accent-gold;
    font-weight: $font-bold;
}

.zodiac-cell {
    width: 180px;
}

.zodiac-content {
    display: flex;
    flex-direction: column;
    gap: $spacing-xs;
}

.zodiac-name {
    font-weight: $font-medium;
    color: $primary-violet;
}

.sign-transition {
    font-size: $font-xs;
    color: rgba($text-secondary, 0.7);
    display: flex;
    gap: $spacing-xs;
    align-items: center;

    i {
        color: $accent-gold;
    }

    small {
        color: rgba($text-secondary, 0.5);
    }
}

.organs-cell {
    min-width: 250px;
}

.organs-text {
    font-size: $font-xs;
    color: $text-secondary;
    line-height: 1.5;
}

.surgery-cell {
    width: 100px;
    text-align: center;
}

.surgery-badge {
    display: inline-block;
    padding: $spacing-xs $spacing-md;
    border-radius: $radius-full;
    font-size: $font-xs;
    font-weight: $font-bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;

    &.surgery-yes {
        background: rgba(#10b981, 0.2);
        color: #10b981;
        border: 1px solid rgba(#10b981, 0.4);
    }

    &.surgery-no {
        background: rgba(#f59e0b, 0.2);
        color: #f59e0b;
        border: 1px solid rgba(#f59e0b, 0.4);
    }

    &.surgery-no-urgent {
        background: rgba(#ef4444, 0.2);
        color: #ef4444;
        border: 1px solid rgba(#ef4444, 0.4);
        animation: pulse-warning 1.5s ease-in-out infinite;
    }

    &.surgery-neutral {
        background: rgba($text-secondary, 0.1);
        color: $text-secondary;
        border: 1px solid rgba($text-secondary, 0.2);
    }
}

// ===================================
// Legend
// ===================================
.calendar-legend {
    background: rgba($bg-card, 0.25);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba($primary-violet, 0.15);
    border-radius: $radius-2xl;
    padding: $spacing-2xl;
}

.legend-title {
    font-size: $font-xl;
    font-weight: $font-bold;
    color: $text-primary;
    margin-bottom: $spacing-lg;
    display: flex;
    gap: $spacing-sm;
    align-items: center;

    i {
        color: $primary-violet;
    }
}

.legend-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: $spacing-lg;
    margin-bottom: $spacing-xl;

    @include mobile {
        grid-template-columns: 1fr;
    }
}

.legend-item {
    display: flex;
    gap: $spacing-md;
    align-items: center;
}

.legend-text {
    font-size: $font-sm;
    color: $text-secondary;
}

.info-box {
    padding: $spacing-lg;
    background: rgba($accent-gold, 0.05);
    border: 1px solid rgba($accent-gold, 0.2);
    border-radius: $radius-lg;
    display: flex;
    gap: $spacing-md;

    i {
        color: $accent-gold;
        font-size: $font-xl;
        flex-shrink: 0;
    }

    p {
        font-size: $font-sm;
        color: $text-secondary;
        line-height: 1.6;
        margin: 0;

        strong {
            color: $text-primary;
            font-weight: $font-bold;
        }
    }
}

// ===================================
// Animations
// ===================================
@keyframes pulse-glow {

    0%,
    100% {
        filter: drop-shadow(0 0 8px rgba($text-secondary, 0.5));
        transform: scale(1);
    }

    50% {
        filter: drop-shadow(0 0 20px rgba($text-secondary, 0.8));
        transform: scale(1.1);
    }
}

@keyframes pulse-warning {

    0%,
    100% {
        box-shadow: 0 0 0 0 rgba(#ef4444, 0.4);
    }

    50% {
        box-shadow: 0 0 15px 5px rgba(#ef4444, 0.2);
    }
}

// ===================================
// Current Phase Info Section
// ===================================
.current-phase-info {
    margin-top: 80px;
    margin-bottom: $spacing-3xl;
    background: transparent;
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba($primary-violet, 0.2);
    border-radius: $radius-2xl;
    padding: $spacing-2xl;
    box-shadow: 0 10px 40px rgba($primary-violet, 0.15);
}

.phase-header-main {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: $spacing-xl;
    margin-bottom: $spacing-xl;
    padding-bottom: $spacing-xl;
    border-bottom: 1px solid rgba($primary-violet, 0.15);

    @include mobile {
        flex-direction: column;
        text-align: center;
    }
}

.phase-left {
    flex: 1;
}

.moon-calendar-title {
    font-size: $font-3xl;
    font-weight: $font-bold;
    background: $gradient-cosmic;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: flex;
    align-items: center;
    gap: $spacing-md;
    margin: 0 0 $spacing-md 0;

    i {
        background: $gradient-cosmic;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: pulse 2s ease-in-out infinite;
    }

    @include mobile {
        font-size: $font-2xl;
        justify-content: center;
    }
}

.calendar-subtitle {
    font-size: $font-lg;
    color: $text-secondary;
    margin-bottom: $spacing-xs;
    font-weight: $font-medium;
}

.timezone-info {
    font-size: $font-sm;
    color: rgba($text-secondary, 0.7);
    display: flex;
    align-items: center;
    gap: $spacing-xs;
    margin: 0;

    @include mobile {
        justify-content: center;
    }

    i {
        color: $primary-violet;
    }
}

.phase-right {
    display: flex;
    align-items: center;
    gap: $spacing-xl;

    @include mobile {
        flex-direction: column;
    }
}

.phase-header {
    display: flex;
    align-items: center;
    gap: $spacing-xl;
    margin-bottom: $spacing-xl;
    padding-bottom: $spacing-xl;
    border-bottom: 1px solid rgba($primary-violet, 0.15);

    @include mobile {
        flex-direction: column;
        text-align: center;
    }
}

.current-phase-icon {
    font-size: 80px;
    filter: drop-shadow(0 0 20px rgba($text-secondary, 0.6));
    animation: pulse-glow 3s ease-in-out infinite;
}

.phase-title-group {
    flex: 1;
}

.current-phase-title {
    font-size: $font-2xl;
    font-weight: $font-bold;
    background: $gradient-cosmic;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: $spacing-sm;
}

.current-phase-zodiac {
    font-size: $font-base;
    color: $text-secondary;
    display: flex;
    align-items: center;
    gap: $spacing-sm;
    margin: 0;

    @include mobile {
        justify-content: center;
    }

    i {
        color: $accent-gold;
    }
}

.phase-description {
    margin-bottom: $spacing-2xl;

    p {
        font-size: $font-base;
        color: $text-secondary;
        line-height: 1.8;
        margin: 0;
    }
}

.recommendations-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: $spacing-xl;
    margin-bottom: $spacing-2xl;

    @include mobile {
        grid-template-columns: 1fr;
    }
}

.recommendation-card {
    background: rgba($bg-card, 0.25);
    backdrop-filter: blur(15px);
    border-radius: $radius-xl;
    padding: $spacing-xl;
    border: 1px solid rgba($primary-violet, 0.2);
    @include smooth-transition;

    &:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba($primary-violet, 0.2);
    }

    &.favorable {
        border-color: rgba(#10b981, 0.3);

        .card-header i {
            color: #10b981;
        }

        .recommendation-list li i {
            color: #10b981;
        }
    }

    &.unfavorable {
        border-color: rgba(#f59e0b, 0.3);

        .card-header i {
            color: #f59e0b;
        }

        .recommendation-list li i {
            color: #f59e0b;
        }
    }
}

.card-header {
    display: flex;
    align-items: center;
    gap: $spacing-md;
    margin-bottom: $spacing-lg;

    i {
        font-size: $font-xl;
    }

    h3 {
        font-size: $font-lg;
        font-weight: $font-bold;
        color: $text-primary;
        margin: 0;
    }
}

.recommendation-list {
    list-style: none;
    padding: 0;
    margin: 0;

    li {
        display: flex;
        align-items: flex-start;
        gap: $spacing-md;
        padding: $spacing-sm 0;
        font-size: $font-sm;
        color: $text-secondary;
        line-height: 1.6;

        i {
            margin-top: 4px;
            font-size: $font-xs;
            flex-shrink: 0;
        }
    }
}

.zodiac-influence {
    background: rgba($bg-card, 0.25);
    backdrop-filter: blur(15px);
    border: 1px solid rgba($primary-violet, 0.2);
    border-radius: $radius-xl;
    padding: $spacing-xl;
}

.influence-header {
    display: flex;
    align-items: center;
    gap: $spacing-md;
    margin-bottom: $spacing-md;

    i {
        color: $text-secondary;
        font-size: $font-xl;
    }

    h3 {
        font-size: $font-lg;
        font-weight: $font-bold;
        color: $text-primary;
        margin: 0;
    }
}

.influence-text {
    font-size: $font-sm;
    color: $text-secondary;
    line-height: 1.8;
    margin-bottom: $spacing-lg;
}

.influenced-organs {
    display: flex;
    align-items: center;
    gap: $spacing-md;
    padding: $spacing-md;
    background: rgba($bg-card, 0.3);
    border-radius: $radius-lg;
    font-size: $font-sm;
    color: $text-secondary;

    i {
        color: $accent-gold;
    }

    strong {
        color: $text-primary;
    }
}